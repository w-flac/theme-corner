<!doctype html>
<html
  th:replace="~{modules/layout :: html(title = ${site.title}, header = 'default', footer = 'default', head = null,content = ~{::content})}"
  xmlns:th="https://www.thymeleaf.org"
>
  <th:block th:fragment="content">
    <th:block th:if="${theme.config.oIndex.Hero.Hero_enabled == true}">
      <th:block th:replace="~{modules/heroPost :: heroPost}" />
    </th:block>
    <th:block th:replace="~{modules/postModule}" />
    <section class="space-y-10 pt-12 pb-12" th:if="${theme.config.oCat.oCat_enabled}" th:with="oCat = ${theme.config.oCat}" id="oIndex_cat">
      <!-- 分类展示 -->
      <div class="flex items-center gap-2">
        <svg class="icon size-8 shrink-0" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
          <path
            d="M885.333333 96c23.786667 0 39.253333 25.034667 28.618667 46.314667a7024.8 7024.8 0 0 0-56.917333 116.234666A424.853333 424.853333 0 0 1 938.666667 509.589333c0 235.637333-191.029333 426.666667-426.666667 426.666667s-426.666667-191.029333-426.666667-426.666667c0-235.648 191.029333-426.666667 426.666667-426.666666a424.938667 424.938667 0 0 1 196.544 47.872C762.453333 107.573333 821.482667 96 885.333333 96z m-164.234666 99.381333a32 32 0 0 1-29.696-1.066666A360.821333 360.821333 0 0 0 512 146.933333c-200.298667 0-362.666667 162.368-362.666667 362.666667 0 200.288 162.368 362.666667 362.666667 362.666667s362.666667-162.378667 362.666667-362.666667a360.96 360.96 0 0 0-79.850667-227.061333 32 32 0 0 1-4-33.706667 5870.922667 5870.922667 0 0 1 41.322667-85.589333c-39.786667 4.970667-76.768 15.701333-111.04 32.149333zM330.666667 362.666667a42.666667 42.666667 0 0 1 42.666666 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666667-42.666666z m170.666666 0a42.666667 42.666667 0 0 1 42.666667 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666666-42.666666z"
          ></path>
        </svg>
        <h3 class="shrink-0 text-2xl font-medium text-gray-800 dark:text-white/90">[[${oCat.Category.categoryTitle}]]</h3>
        <span class="h-10 w-px bg-gray-300 md:h-6 dark:bg-white/40"></span>
        <p class="text-xs text-gray-500 md:text-sm dark:text-white/60">[[${oCat.Category.categoryDesc}]]</p>
      </div>
      <ul class="mt-10 grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3">
        <th:block th:if="${oCat.oCat_style == 'default' && not #lists.isEmpty(oCat.Category.categoryList)}">
          <li class="rounded-2xl border border-gray-200/60 bg-white/60 p-4 dark:border-white/10 dark:bg-white/5" th:each="item : ${oCat.Category.categoryList}">
            <h3 class="text-sm font-medium text-gray-700 dark:text-white/80" th:text="${item.categoryItem_title}"></h3>
            <p class="mt-1 line-clamp-2 overflow-hidden text-sm leading-6 text-gray-500 dark:text-white/60" th:text="${item.categoryItem_desc}"></p>
            <div class="mt-3 flex flex-wrap gap-2 text-xs text-gray-500 dark:text-white/50">
              <a
                class="rounded-full border border-dashed border-gray-200/70 px-2 py-1 dark:border-white/10"
                th:each="categorySlug : ${item.categoryItem_list}"
                th:with="categoryObj=${@categoryFinder.getByName(categorySlug)}"
                th:text="${categoryObj.spec.displayName}"
                th:href="@{${categoryObj.status.permalink}}"
              ></a>
              <span
                class="rounded-full border border-dashed border-gray-200/70 px-2 py-1 text-gray-400 dark:border-white/10 dark:text-white/30"
                th:if="${#lists.isEmpty(item.categoryItem_list)}"
              >
                暂无分类
              </span>
            </div>
          </li>
        </th:block>
        <th:block th:if="${oCat.oCat_style == 'list' && not #lists.isEmpty(oCat.Category.categoryItem_list)}">
          <li
            class="rounded-2xl border border-gray-200/60 bg-white/60 p-4 dark:border-white/10 dark:bg-white/5"
            th:each="categorySlug : ${oCat.Category.categoryItem_list}"
            th:with="categoryObj=${@categoryFinder.getByName(categorySlug)}, posts=${postFinder.list({page: 1, size: 3, categoryName: categorySlug})}"
          >
            <a th:href="@{${categoryObj.status.permalink}}">
              <div class="flex w-full items-center justify-between">
                <h3 class="text-sm font-medium text-gray-700 dark:text-white/80" th:text="${categoryObj.spec.displayName}"></h3>
                <svg class="size-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                  <path
                    d="M448 296c0 66.3-53.7 120-120 120l-8 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l8 0c30.9 0 56-25.1 56-56l0-8-64 0c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64l64 0c35.3 0 64 28.7 64 64l0 136zm-256 0c0 66.3-53.7 120-120 120l-8 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l8 0c30.9 0 56-25.1 56-56l0-8-64 0c-35.3 0-64-28.7-64-64l0-64c0-35.3 28.7-64 64-64l64 0c35.3 0 64 28.7 64 64l0 136z"
                  />
                </svg>
              </div>
              <p
                class="mt-2 line-clamp-2 overflow-hidden text-sm leading-6 text-gray-500 dark:text-white/60"
                th:text="${categoryObj.spec.description ?: '似乎少了点什么？去为这个分类添加一段介绍吧。'}"
              ></p>
            </a>
            <ul class="mt-5 space-y-2 text-xs text-gray-500 dark:text-white/50">
              <li
                class="rounded-lg border border-dashed border-gray-200/70 p-2 transition-colors hover:text-gray-700 dark:border-white/15 dark:hover:text-white/80"
                th:each="post : ${posts.items}"
              >
                <a th:href="@{${post.status.permalink}}" class="inline-flex w-full items-center justify-between align-bottom">
                  <span class="truncate" th:text="${post.spec.title}"></span>
                  <span class="ml-2 shrink-0 font-mono opacity-60" th:text="${#temporals.format(post.spec.publishTime,'MM-dd')}"></span>
                </a>
              </li>
              <li class="rounded-lg border border-dashed border-gray-200/70 p-2 text-gray-400 dark:border-white/15 dark:text-white/30" th:if="${#lists.isEmpty(posts.items)}">
                暂无文章
              </li>
            </ul>
          </li>
        </th:block>
      </ul>
    </section>
    <section
      class="space-y-10 pt-12 pb-12"
      id="oIndex_friends"
      th:if="${theme.config.oFriends.friends_enabled}"
      th:with="oFriends = ${theme.config.oFriends.Friends}, customFriends = ${theme.config.oFriends.Custom}"
    >
      <!-- 友链展示 -->
      <div class="flex items-center gap-2">
        <svg class="icon size-8 shrink-0" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
          <path
            d="M885.333333 96c23.786667 0 39.253333 25.034667 28.618667 46.314667a7024.8 7024.8 0 0 0-56.917333 116.234666A424.853333 424.853333 0 0 1 938.666667 509.589333c0 235.637333-191.029333 426.666667-426.666667 426.666667s-426.666667-191.029333-426.666667-426.666667c0-235.648 191.029333-426.666667 426.666667-426.666666a424.938667 424.938667 0 0 1 196.544 47.872C762.453333 107.573333 821.482667 96 885.333333 96z m-164.234666 99.381333a32 32 0 0 1-29.696-1.066666A360.821333 360.821333 0 0 0 512 146.933333c-200.298667 0-362.666667 162.368-362.666667 362.666667 0 200.288 162.368 362.666667 362.666667 362.666667s362.666667-162.378667 362.666667-362.666667a360.96 360.96 0 0 0-79.850667-227.061333 32 32 0 0 1-4-33.706667 5870.922667 5870.922667 0 0 1 41.322667-85.589333c-39.786667 4.970667-76.768 15.701333-111.04 32.149333zM330.666667 362.666667a42.666667 42.666667 0 0 1 42.666666 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666667-42.666666z m170.666666 0a42.666667 42.666667 0 0 1 42.666667 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666666-42.666666z"
          ></path>
        </svg>
        <h3 class="shrink-0 text-2xl font-medium text-gray-800 dark:text-white/90">[[${oFriends.friendsTitle}]]</h3>
        <span class="h-10 w-px bg-gray-300 md:h-6 dark:bg-white/40"></span>
        <p class="text-xs text-gray-500 md:text-sm dark:text-white/60">[[${oFriends.friendsDesc}]]</p>
      </div>
      <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3">
        <th:block th:if="${oFriends.friendsStyle == 'links'}" th:with="linkName = ${oFriends.linkName}">
          <th:block th:each="group : ${linkFinder.groupBy()}" th:if="${group.metadata.name == linkName}">
            <li class="group flex gap-4 rounded-2xl border border-gray-200/60 bg-white/60 p-4 dark:border-white/10 dark:bg-white/5" th:each="link : ${linkFinder.listBy(linkName)}">
              <div class="h-16 w-16 shrink-0 overflow-hidden rounded-full border border-gray-200/60 dark:border-white/10">
                <img class="h-full w-full object-cover" th:src="${link.spec.logo}" th:alt="${link.spec.displayName}" />
              </div>
              <div class="flex flex-1 flex-col justify-between text-xs text-gray-500 dark:text-white/60">
                <div>
                  <div class="flex items-center justify-between text-sm text-gray-800 dark:text-white">
                    <span class="font-medium" th:text="${link.spec.displayName}"></span>
                    <span
                      class="rounded-full border border-gray-200/60 px-2 py-1 text-xs text-gray-400 dark:border-white/10 dark:text-white/40"
                      th:text="${group.spec.displayName}"
                    ></span>
                  </div>
                  <p class="mt-2 line-clamp-1 leading-6" th:text="${link.spec.description}"></p>
                </div>
                <div class="mt-3 flex items-center justify-between">
                  <a
                    class="text-xs text-gray-500 transition-colors duration-300 group-hover:text-black dark:text-white/60 dark:group-hover:text-white"
                    th:href="${link.spec.url}"
                    th:text="${#strings.replace(#strings.replace(link.spec.url, 'https://', ''), 'http://', '')}"
                    target="_blank"
                    rel="noreferrer"
                  ></a>
                  <span class="text-xs text-gray-400 dark:text-white/40" th:text="${#temporals.format(link.metadata.creationTimestamp,'yyyy年MM月')}"></span>
                </div>
              </div>
            </li>
          </th:block>
        </th:block>
        <li
          class="flex gap-4 rounded-2xl border border-gray-200/60 bg-white/60 p-4 dark:border-white/10 dark:bg-white/5"
          th:if="${oFriends.friendsStyle == 'custom'}"
          th:each="item : ${customFriends.customLinks}"
        >
          <div class="h-16 w-16 shrink-0 overflow-hidden rounded-full border border-gray-200/60 dark:border-white/10">
            <img class="h-full w-full object-cover" th:src="${item.customLink_icon}" th:alt="${item.customLink_title}" />
          </div>
          <div class="flex flex-1 flex-col justify-between text-xs text-gray-500 dark:text-white/60">
            <div>
              <div class="flex items-center justify-between text-sm text-gray-800 dark:text-white">
                <span class="font-medium" th:text="${item.customLink_title}"></span>
                <span
                  class="rounded-full border border-gray-200/60 px-2 py-1 text-xs text-gray-400 dark:border-white/10 dark:text-white/40"
                  th:text="${item.customLink_tag}"
                ></span>
              </div>
              <p class="mt-2 line-clamp-1 leading-6" th:text="${item.customLink_desc}"></p>
            </div>
            <div class="mt-3 flex items-center justify-between">
              <a class="text-xs" th:href="${item.customLink_url}" th:text="${item.customLink_url}" target="_blank" rel="noreferrer"></a>
              <span class="text-xs text-gray-400 dark:text-white/40" th:text="${item.customLink_time}"></span>
            </div>
          </div>
        </li>
      </ul>
    </section>
    <section class="pt-12 pb-10" id="oIndex_info" th:if="${theme.config.oInfo.info_enabled}">
      <!-- 关于展示 -->
      <div class="flex items-center gap-2" th:with="info = ${theme.config.oInfo.Info}">
        <svg class="icon size-8 shrink-0" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
          <path
            d="M885.333333 96c23.786667 0 39.253333 25.034667 28.618667 46.314667a7024.8 7024.8 0 0 0-56.917333 116.234666A424.853333 424.853333 0 0 1 938.666667 509.589333c0 235.637333-191.029333 426.666667-426.666667 426.666667s-426.666667-191.029333-426.666667-426.666667c0-235.648 191.029333-426.666667 426.666667-426.666666a424.938667 424.938667 0 0 1 196.544 47.872C762.453333 107.573333 821.482667 96 885.333333 96z m-164.234666 99.381333a32 32 0 0 1-29.696-1.066666A360.821333 360.821333 0 0 0 512 146.933333c-200.298667 0-362.666667 162.368-362.666667 362.666667 0 200.288 162.368 362.666667 362.666667 362.666667s362.666667-162.378667 362.666667-362.666667a360.96 360.96 0 0 0-79.850667-227.061333 32 32 0 0 1-4-33.706667 5870.922667 5870.922667 0 0 1 41.322667-85.589333c-39.786667 4.970667-76.768 15.701333-111.04 32.149333zM330.666667 362.666667a42.666667 42.666667 0 0 1 42.666666 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666667-42.666666z m170.666666 0a42.666667 42.666667 0 0 1 42.666667 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666666-42.666666z"
          ></path>
        </svg>
        <h3 class="shrink-0 text-2xl font-medium text-gray-800 dark:text-white/90">[[${info.infoTitle}]]</h3>
        <span class="h-10 w-px bg-gray-300 md:h-6 dark:bg-white/40"></span>
        <p class="text-xs text-gray-500 md:text-sm dark:text-white/60">[[${info.infoDesc}]]</p>
      </div>
      <div class="mt-10 overflow-hidden rounded-3xl border border-gray-200/70 bg-white/60 dark:border-white/10 dark:bg-white/5">
        <div class="grid gap-8 p-4 md:grid-cols-3">
          <div class="space-y-4 md:col-span-2" th:with="infoUser=${theme.config.oInfo.infoUser}">
            <div class="flex items-center gap-4">
              <img th:src="${infoUser.infoUser_logo}" alt="avatar" class="h-16 w-16 rounded-full" />
              <div class="space-y-1">
                <h3 class="text-2xl font-semibold text-gray-900 dark:text-white" th:text="${infoUser.infoUser_name}"></h3>
                <p class="text-xs text-gray-500 dark:text-white/60" th:text="${infoUser.infoUser_tag}"></p>
              </div>
            </div>
            <p class="text-sm leading-8 whitespace-pre-line text-gray-600 dark:text-white/70" th:utext="${infoUser.infoUser_desc}"></p>
            <ul
              class="flex items-center gap-4"
              th:if="${theme.config.oInfo.info_enabled && theme.config.oInfo.infoSocial_type == 'default'}"
              th:with="infoSocial=${theme.config.oInfo.infoSocial}"
            >
              <li class="rounded-full bg-gray-100 p-2 dark:bg-white/10" th:each="item : ${infoSocial.socialList}">
                <a
                  th:href="${item.socialItem_url}"
                  th:title="${item.socialItem_title}"
                  th:target="${#strings.startsWith(item.socialItem_url,'http') ? '_blank' : null}"
                  rel="noreferrer"
                  class="block size-4 text-gray-600 hover:text-black dark:text-white/80 dark:hover:text-white"
                >
                  <th:block th:utext="${item.socialItem_icon.value}"></th:block>
                </a>
              </li>
            </ul>
          </div>
          <ul class="grid grid-cols-2 gap-2 text-gray-600 dark:text-white/70" th:with="stats = ${siteStatsFinder.getStats()}">
            <li class="flex flex-col justify-center gap-1 rounded-2xl border border-dashed border-gray-200/70 px-5 py-4 dark:border-white/15">
              <span class="text-xs tracking-widest text-gray-400 uppercase dark:text-white/40">文章</span>
              <span class="text-base font-semibold text-gray-900 lg:text-2xl dark:text-white" th:text="${stats.post}"></span>
            </li>
            <li class="flex flex-col justify-center gap-1 rounded-2xl border border-dashed border-gray-200/70 px-5 py-4 dark:border-white/15">
              <span class="text-xs tracking-widest text-gray-400 uppercase dark:text-white/40">分类</span>
              <span class="text-base font-semibold text-gray-900 lg:text-2xl dark:text-white" th:text="${stats.category}"></span>
            </li>
            <li class="flex flex-col justify-center gap-1 rounded-2xl border border-dashed border-gray-200/70 px-5 py-4 dark:border-white/15">
              <span class="justify-center text-xs tracking-widest text-gray-400 uppercase dark:text-white/40">评论</span>
              <span class="text-base font-semibold text-gray-900 lg:text-2xl dark:text-white" th:text="${stats.comment}"></span>
            </li>
            <li class="flex flex-col justify-center gap-1 rounded-2xl border border-dashed border-gray-200/70 px-5 py-4 dark:border-white/15">
              <span class="text-xs tracking-widest text-gray-400 uppercase dark:text-white/40">浏览</span>
              <span class="text-base font-semibold text-gray-900 lg:text-2xl dark:text-white" th:text="${stats.visit}"></span>
            </li>
          </ul>
        </div>
        <div class="border-gray-200/70 p-4 md:border-t dark:border-white/10" th:if="${theme.config.oInfo.infoSocial_type == 'infoOther'}">
          <div class="grid gap-6 md:grid-cols-3">
            <div
              class="scrollbar-hide overflow-y-auto rounded-2xl border border-dashed border-gray-200/70 p-4 md:max-h-46 dark:border-white/10"
              th:with="infoSocial=${theme.config.oInfo.infoSocial}"
            >
              <h5 class="text-xs font-semibold tracking-[0.3em] text-gray-400 uppercase dark:text-white/50" th:text="${infoSocial?.infoSocial_title}">角落来信</h5>
              <ul class="mt-4 text-sm text-gray-600 dark:text-white/70">
                <li class="flex items-center" th:each="item : ${infoSocial.socialList}">
                  <a
                    class="flex items-center gap-2 leading-8 text-gray-600 dark:text-white/70"
                    th:href="${item.socialItem_url}"
                    th:target="${#strings.startsWith(item.socialItem_url,'http') ? '_blank' : null}"
                    rel="noreferrer"
                  >
                    <div class="size-6 rounded-full bg-gray-100 p-1 text-gray-600 dark:bg-white/10 dark:text-white/60">
                      <th:block th:utext="${item.socialItem_icon.value}"></th:block>
                    </div>
                    <span th:text="${item.socialItem_title}"></span>
                  </a>
                </li>
              </ul>
            </div>
            <div
              class="scrollbar-hide overflow-y-auto rounded-2xl border border-dashed border-gray-200/70 p-4 md:max-h-46 dark:border-white/10"
              th:with="infoOther=${theme.config.oInfo.infoOther}"
            >
              <h5 class="text-xs font-semibold tracking-[0.3em] text-gray-400 uppercase dark:text-white/50" th:text="${infoOther.infoOther_title}"></h5>
              <p class="mt-4 text-sm leading-8 whitespace-pre-line text-gray-600 dark:text-white/70" th:utext="${infoOther.infoOther_desc}"></p>
            </div>
            <div
              class="scrollbar-hide max-h-46 overflow-y-auto rounded-2xl border border-dashed border-gray-200/70 p-4 dark:border-white/10"
              th:with="infoTrend=${theme.config.oInfo.infoTrend}"
            >
              <h5 class="text-xs font-semibold tracking-[0.3em] text-gray-400 uppercase dark:text-white/50" th:text="${infoTrend.infoTrend_title}">近期动向</h5>
              <p class="mt-4 text-sm leading-8 whitespace-pre-line text-gray-600 dark:text-white/70" th:utext="${infoTrend.infoTrend_desc}"></p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </th:block>
</html>
