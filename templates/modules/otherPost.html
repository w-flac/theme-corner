<th:block th:fragment="postBlog(posts, showPageCategory)">
  <li
    th:each="post : ${posts}"
    class="flex flex-col items-center gap-4 rounded-2xl border border-gray-100 bg-white md:flex-row md:gap-6 md:p-6 dark:border-white/10 dark:bg-white/5"
  >
    <img
      class="h-48 w-full rounded-t-2xl object-cover md:w-1/3 md:rounded-2xl"
      th:src="${post.spec.cover}"
      sizes="(max-width: 1600px) 100vw, 1600px"
      th:srcset="|${thumbnail.gen(post.spec.cover, 's')} 400w,
                  ${thumbnail.gen(post.spec.cover, 'm')} 800w,
                  ${thumbnail.gen(post.spec.cover, 'l')} 1200w,
                  ${thumbnail.gen(post.spec.cover, 'xl')} 1600w|"
      th:if="${not #strings.isEmpty(post.spec.cover)}"
    />
    <img class="h-48 w-full rounded-t-2xl object-cover md:w-1/3 md:rounded-2xl" th:src="${#theme.assets('/images/blog.avif')}" th:if="${#strings.isEmpty(post.spec.cover)}" />
    <div class="flex w-full flex-1 flex-col gap-2 p-4 md:p-0">
      <div class="flex items-center gap-3 text-xs tracking-[0.35em] text-gray-400 uppercase dark:text-white/50">
        <span th:text="${#dates.format(post.spec.publishTime, 'yyyy-MM-dd')}"></span>
        <span class="h-px w-4 bg-gray-200 dark:bg-white/10"></span>
        <a
          th:if="${showPageCategory ? true : (post.categories != null and !post.categories.isEmpty())}"
          th:href="@{${showPageCategory ? category.status.permalink : post.categories[0].status.permalink}}"
          th:text="${showPageCategory ? category.spec.displayName : post.categories[0].spec.displayName}"
          th:title="|分类：${showPageCategory ? category.spec.displayName : post.categories[0].spec.displayName}|"
        ></a>
      </div>
      <a th:href="@{${post.status.permalink}}">
        <h4 class="mt-2 text-xl leading-tight font-normal text-gray-900 dark:text-white/90" th:text="${post.spec.title}"></h4>
      </a>
      <p class="mt-2 line-clamp-3 overflow-hidden text-sm leading-relaxed text-gray-600 dark:text-white/70" th:text="${post.status.excerpt}"></p>
      <div class="mt-6 flex items-center justify-between">
        <a th:href="@{${post.status.permalink}}" class="inline-flex items-center gap-1 text-xs font-medium text-gray-900 lg:text-sm dark:text-white">阅读全文</a>
        <ul class="flex items-center gap-2 text-xs text-gray-500 dark:text-white/50">
          <li class="flex items-center gap-1">
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M885.333333 96c23.786667 0 39.253333 25.034667 28.618667 46.314667a7024.8 7024.8 0 0 0-56.917333 116.234666A424.853333 424.853333 0 0 1 938.666667 509.589333c0 235.637333-191.029333 426.666667-426.666667 426.666667s-426.666667-191.029333-426.666667-426.666667c0-235.648 191.029333-426.666667 426.666667-426.666666a424.938667 424.938667 0 0 1 196.544 47.872C762.453333 107.573333 821.482667 96 885.333333 96z m-164.234666 99.381333a32 32 0 0 1-29.696-1.066666A360.821333 360.821333 0 0 0 512 146.933333c-200.298667 0-362.666667 162.368-362.666667 362.666667 0 200.288 162.368 362.666667 362.666667 362.666667s362.666667-162.378667 362.666667-362.666667a360.96 360.96 0 0 0-79.850667-227.061333 32 32 0 0 1-4-33.706667 5870.922667 5870.922667 0 0 1 41.322667-85.589333c-39.786667 4.970667-76.768 15.701333-111.04 32.149333zM330.666667 362.666667a42.666667 42.666667 0 0 1 42.666666 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666667-42.666666z m170.666666 0a42.666667 42.666667 0 0 1 42.666667 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666666-42.666666z"
              ></path>
            </svg>
            <span th:text="|${post.stats.visit ?:0}|"></span>
          </li>
          <li class="flex items-center gap-1">
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M667.786667 117.333333C832.864 117.333333 938.666667 249.706667 938.666667 427.861333c0 138.250667-125.098667 290.506667-371.573334 461.589334a96.768 96.768 0 0 1-110.186666 0C210.432 718.368 85.333333 566.112 85.333333 427.861333 85.333333 249.706667 191.136 117.333333 356.213333 117.333333c59.616 0 100.053333 20.832 155.786667 68.096C567.744 138.176 608.170667 117.333333 667.786667 117.333333z m0 63.146667c-41.44 0-70.261333 15.189333-116.96 55.04-2.165333 1.845333-14.4 12.373333-17.941334 15.381333a32.32 32.32 0 0 1-41.770666 0c-3.541333-3.018667-15.776-13.536-17.941334-15.381333-46.698667-39.850667-75.52-55.04-116.96-55.04C230.186667 180.48 149.333333 281.258667 149.333333 426.698667 149.333333 537.6 262.858667 675.242667 493.632 834.826667a32.352 32.352 0 0 0 36.736 0C761.141333 675.253333 874.666667 537.6 874.666667 426.698667c0-145.44-80.853333-246.218667-206.88-246.218667z"
              ></path>
            </svg>
            <span th:text="|${post.stats.upvote ?:0}|"></span>
          </li>
          <li class="flex items-center gap-1">
            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M157.568 751.296c-11.008-18.688-18.218667-31.221333-21.802667-37.909333A424.885333 424.885333 0 0 1 85.333333 512C85.333333 276.362667 276.362667 85.333333 512 85.333333s426.666667 191.029333 426.666667 426.666667-191.029333 426.666667-426.666667 426.666667a424.778667 424.778667 0 0 1-219.125333-60.501334 2786.56 2786.56 0 0 0-20.053334-11.765333l-104.405333 28.48c-23.893333 6.506667-45.802667-15.413333-39.285333-39.296l28.437333-104.288z m65.301333 3.786667l-17.258666 63.306666 63.306666-17.258666a32 32 0 0 1 24.522667 3.210666 4515.84 4515.84 0 0 1 32.352 18.944A360.789333 360.789333 0 0 0 512 874.666667c200.298667 0 362.666667-162.368 362.666667-362.666667S712.298667 149.333333 512 149.333333 149.333333 311.701333 149.333333 512c0 60.586667 14.848 118.954667 42.826667 171.136 3.712 6.912 12.928 22.826667 27.370667 47.232a32 32 0 0 1 3.338666 24.714667z m145.994667-70.773334a32 32 0 1 1 40.917333-49.205333A159.189333 159.189333 0 0 0 512 672c37.888 0 73.674667-13.173333 102.186667-36.885333a32 32 0 0 1 40.917333 49.216A223.178667 223.178667 0 0 1 512 736a223.178667 223.178667 0 0 1-143.136-51.690667z"
              />
            </svg>
            <span th:text="|${post.stats.comment ?:0} 条评论|"></span>
          </li>
        </ul>
      </div>
    </div>
  </li>
</th:block>
<th:block th:fragment="postPage(pages)">
  <div
    class="mt-12 flex flex-wrap items-center justify-between gap-4 rounded-2xl border border-gray-200/70 bg-white/70 p-4 text-sm text-gray-500 md:px-6 dark:border-white/10 dark:bg-white/5 dark:text-white/60"
    th:if="${pages.hasPrevious() || pages.hasNext()}"
  >
    <a
      th:href="@{${pages.prevUrl}}"
      class="inline-flex items-center gap-2 rounded-full border border-gray-200/70 px-4 py-2 dark:border-white/10"
      th:classappend="${!pages.hasPrevious()} ? ' pointer-events-none text-gray-300 dark:text-white/30' : ' text-gray-700 dark:text-white/80'"
    >
      <span aria-hidden="true">←</span>
      <span>上一页</span>
    </a>
    <span class="flex items-center gap-2 text-xs tracking-[0.4em] text-gray-400 uppercase dark:text-white/40">
      <span th:text="${pages.page}"></span>
      <span class="h-px w-6 border-t border-dashed border-gray-300 dark:border-white/20"></span>
      <span th:text="${pages.totalPages}"></span>
    </span>
    <a
      th:href="@{${pages.nextUrl}}"
      class="inline-flex items-center gap-2 rounded-full border border-gray-200/70 px-4 py-2 dark:border-white/10"
      th:classappend="${!pages.hasNext()} ? ' pointer-events-none text-gray-300 dark:text-white/30' : ' text-gray-700 dark:text-white/80'"
    >
      <span>下一页</span>
      <span aria-hidden="true">→</span>
    </a>
  </div>
</th:block>
