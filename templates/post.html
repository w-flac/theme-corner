<!doctype html>
<html
  th:replace="~{modules/layout :: html(title = ${post.spec.title} + ' - ' + ${site.title}, header = 'default', footer = 'default', head = null,content = ~{::content})}"
  xmlns:th="https://www.thymeleaf.org"
>
  <th:block th:fragment="content">
    <article class="mx-auto max-w-5xl overflow-x-hidden pt-28 pb-16 md:pt-36">
      <div class="mb-6 space-y-4">
        <h1 class="mb-4 text-2xl font-normal text-gray-900 md:mb-6 md:text-4xl dark:text-white" th:text="${post.spec.title}">文章标题</h1>
        <!-- 文章元信息 -->
        <div class="flex flex-col gap-4 md:flex-row md:items-center">
          <div class="space-y-2 text-gray-500 dark:text-white/60">
            <div class="flex items-center text-xs tracking-wider text-gray-400 uppercase md:gap-4 md:text-sm dark:text-white/50">
              <div class="flex items-center gap-1">
                <span th:text="${#dates.format(post.spec.publishTime, 'yyyy-MM-dd')}"></span>
                <th:block th:if="${post.categories != null and !post.categories.isEmpty()}">
                  <span class="h-px w-2 bg-gray-200 md:w-4 dark:bg-white/30"></span>
                  <a
                    th:href="@{${post.categories[0].status.permalink}}"
                    th:title="|分类：${post.categories[0].spec.displayName}|"
                    th:text="${post.categories[0].spec.displayName}"
                  ></a>
                </th:block>
              </div>
              <div class="flex items-center gap-2 tracking-wider md:gap-4">
                <span class="mx-2 h-3 w-px bg-gray-400 md:h-4"></span>
                <ul class="flex items-center gap-2 md:gap-4">
                  <li class="flex items-center gap-2">
                    <svg class="h-3.5 w-3.5 md:h-4.5 md:w-4.5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                      <path
                        d="M885.333333 96c23.786667 0 39.253333 25.034667 28.618667 46.314667a7024.8 7024.8 0 0 0-56.917333 116.234666A424.853333 424.853333 0 0 1 938.666667 509.589333c0 235.637333-191.029333 426.666667-426.666667 426.666667s-426.666667-191.029333-426.666667-426.666667c0-235.648 191.029333-426.666667 426.666667-426.666666a424.938667 424.938667 0 0 1 196.544 47.872C762.453333 107.573333 821.482667 96 885.333333 96z m-164.234666 99.381333a32 32 0 0 1-29.696-1.066666A360.821333 360.821333 0 0 0 512 146.933333c-200.298667 0-362.666667 162.368-362.666667 362.666667 0 200.288 162.368 362.666667 362.666667 362.666667s362.666667-162.378667 362.666667-362.666667a360.96 360.96 0 0 0-79.850667-227.061333 32 32 0 0 1-4-33.706667 5870.922667 5870.922667 0 0 1 41.322667-85.589333c-39.786667 4.970667-76.768 15.701333-111.04 32.149333zM330.666667 362.666667a42.666667 42.666667 0 0 1 42.666666 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666667-42.666666z m170.666666 0a42.666667 42.666667 0 0 1 42.666667 42.666666v64a42.666667 42.666667 0 1 1-85.333333 0v-64a42.666667 42.666667 0 0 1 42.666666-42.666666z"
                      ></path>
                    </svg>
                    <span th:text="|${post.stats?.visit ?:0}|"></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <svg class="h-3.5 w-3.5 md:h-4.5 md:w-4.5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                      <path
                        d="M157.568 751.296c-11.008-18.688-18.218667-31.221333-21.802667-37.909333A424.885333 424.885333 0 0 1 85.333333 512C85.333333 276.362667 276.362667 85.333333 512 85.333333s426.666667 191.029333 426.666667 426.666667-191.029333 426.666667-426.666667 426.666667a424.778667 424.778667 0 0 1-219.125333-60.501334 2786.56 2786.56 0 0 0-20.053334-11.765333l-104.405333 28.48c-23.893333 6.506667-45.802667-15.413333-39.285333-39.296l28.437333-104.288z m65.301333 3.786667l-17.258666 63.306666 63.306666-17.258666a32 32 0 0 1 24.522667 3.210666 4515.84 4515.84 0 0 1 32.352 18.944A360.789333 360.789333 0 0 0 512 874.666667c200.298667 0 362.666667-162.368 362.666667-362.666667S712.298667 149.333333 512 149.333333 149.333333 311.701333 149.333333 512c0 60.586667 14.848 118.954667 42.826667 171.136 3.712 6.912 12.928 22.826667 27.370667 47.232a32 32 0 0 1 3.338666 24.714667z m145.994667-70.773334a32 32 0 1 1 40.917333-49.205333A159.189333 159.189333 0 0 0 512 672c37.888 0 73.674667-13.173333 102.186667-36.885333a32 32 0 0 1 40.917333 49.216A223.178667 223.178667 0 0 1 512 736a223.178667 223.178667 0 0 1-143.136-51.690667z"
                      ></path>
                    </svg>
                    <span th:text="|${post.stats?.comment ?:0}|"></span>
                  </li>
                  <li class="flex items-center gap-2">
                    <svg class="h-3.5 w-3.5 md:h-4.5 md:w-4.5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                      <path
                        d="M667.786667 117.333333C832.864 117.333333 938.666667 249.706667 938.666667 427.861333c0 138.250667-125.098667 290.506667-371.573334 461.589334a96.768 96.768 0 0 1-110.186666 0C210.432 718.368 85.333333 566.112 85.333333 427.861333 85.333333 249.706667 191.136 117.333333 356.213333 117.333333c59.616 0 100.053333 20.832 155.786667 68.096C567.744 138.176 608.170667 117.333333 667.786667 117.333333z m0 63.146667c-41.44 0-70.261333 15.189333-116.96 55.04-2.165333 1.845333-14.4 12.373333-17.941334 15.381333a32.32 32.32 0 0 1-41.770666 0c-3.541333-3.018667-15.776-13.536-17.941334-15.381333-46.698667-39.850667-75.52-55.04-116.96-55.04C230.186667 180.48 149.333333 281.258667 149.333333 426.698667 149.333333 537.6 262.858667 675.242667 493.632 834.826667a32.352 32.352 0 0 0 36.736 0C761.141333 675.253333 874.666667 537.6 874.666667 426.698667c0-145.44-80.853333-246.218667-206.88-246.218667z"
                      ></path>
                    </svg>
                    <span th:data-upvote-post-name="${post.metadata.name}" th:text="|${post.stats?.upvote ?:0}|"></span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- 文章封面 -->
        <div th:if="${not #strings.isEmpty(post.spec.cover)}" class="mb-8">
          <img
            th:src="${post.spec.cover}"
            th:alt="${post.spec.title}"
            th:srcset="|${thumbnail.gen(post.spec.cover, 's')} 400w,
                              ${thumbnail.gen(post.spec.cover, 'm')} 800w,
                              ${thumbnail.gen(post.spec.cover, 'l')} 1200w,
                              ${thumbnail.gen(post.spec.cover, 'xl')} 1600w|"
            sizes="(max-width: 1600px) 100vw, 1600px"
            class="h-48 w-full rounded-xl object-cover md:h-80"
          />
        </div>
      </div>
      <!-- 文章内容 -->
      <div class="prose prose-base max-w-full" th:utext="${post.content.content}"></div>
      <div class="mt-20 px-4 lg:px-0">
        <div th:if="${post.tags != null and !post.tags.isEmpty()}" class="mb-8">
          <div class="post-tag flex items-center gap-3 text-xs font-normal text-gray-800 uppercase not-italic md:gap-4 md:text-base dark:text-white/90">
            <span class="h-3 w-px bg-gray-400 md:h-4"></span>
            <a th:each="tag : ${post.tags}" th:href="@{${tag.status.permalink}}" th:text="${tag.spec.displayName}" class="tag"></a>
          </div>
        </div>
        <div class="flex items-center justify-between border-t border-gray-200/70 pt-8 dark:border-white/10">
          <div class="flex items-center gap-4">
            <!-- 点赞 -->
            <button
              class="upvote-btn flex items-center gap-1 text-sm text-gray-500 dark:text-white/60"
              th:data-article-name="${post.metadata.name}"
              th:title="${post.spec.title}"
              aria-label="Like post"
            >
              <svg class="size-5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                <path
                  d="M667.786667 117.333333C832.864 117.333333 938.666667 249.706667 938.666667 427.861333c0 138.250667-125.098667 290.506667-371.573334 461.589334a96.768 96.768 0 0 1-110.186666 0C210.432 718.368 85.333333 566.112 85.333333 427.861333 85.333333 249.706667 191.136 117.333333 356.213333 117.333333c59.616 0 100.053333 20.832 155.786667 68.096C567.744 138.176 608.170667 117.333333 667.786667 117.333333z m0 63.146667c-41.44 0-70.261333 15.189333-116.96 55.04-2.165333 1.845333-14.4 12.373333-17.941334 15.381333a32.32 32.32 0 0 1-41.770666 0c-3.541333-3.018667-15.776-13.536-17.941334-15.381333-46.698667-39.850667-75.52-55.04-116.96-55.04C230.186667 180.48 149.333333 281.258667 149.333333 426.698667 149.333333 537.6 262.858667 675.242667 493.632 834.826667a32.352 32.352 0 0 0 36.736 0C761.141333 675.253333 874.666667 537.6 874.666667 426.698667c0-145.44-80.853333-246.218667-206.88-246.218667z"
                ></path>
              </svg>
              <span>喜欢</span>
            </button>
            <!-- 分享 -->
            <button id="share-btn-post" class="share-btn flex items-center gap-1 text-sm text-gray-500 dark:text-white/60" aria-label="Share post">
              <svg class="size-5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                <path
                  d="M853.333333 533.333333a32 32 0 0 1 64 0v266.666667c0 64.8-52.533333 117.333333-117.333333 117.333333H224c-64.8 0-117.333333-52.533333-117.333333-117.333333V256c0-64.8 52.533333-117.333333 117.333333-117.333333h277.333333a32 32 0 0 1 0 64H224a53.333333 53.333333 0 0 0-53.333333 53.333333v544a53.333333 53.333333 0 0 0 53.333333 53.333333h576a53.333333 53.333333 0 0 0 53.333333-53.333333V533.333333z m-42.058666-277.333333l-89.792-95.402667a32 32 0 0 1 46.613333-43.861333l140.544 149.333333C927.861333 286.485333 913.376 320 885.333333 320H724.704C643.029333 320 576 391.210667 576 480v192a32 32 0 1 1-64 0V480c0-123.296 94.784-224 212.704-224h86.570667z"
                ></path>
              </svg>
              <span class="w-fit">分享</span>
            </button>
          </div>
          <!-- 评论数 -->
          <button
            th:if="${haloCommentEnabled}"
            onclick="document.getElementById('page-comment-section').classList.toggle('hidden')"
            class="flex cursor-pointer items-center gap-1 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-white/60 dark:hover:text-white/80"
            aria-label="Toggle comments"
          >
            <svg class="size-5.5" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
              <path
                d="M518.965333 847.498667c-21.290667 3.84-43.232 5.834667-65.632 5.834666a366.4 366.4 0 0 1-189.002666-52.181333 2118.4 2118.4 0 0 0-15.306667-8.981333l-86.944 23.712c-23.893333 6.506667-45.813333-15.402667-39.296-39.296l23.68-86.848c-8.821333-15.008-14.656-25.152-17.632-30.709334A366.485333 366.485333 0 0 1 85.333333 485.333333C85.333333 282.090667 250.090667 117.333333 453.333333 117.333333c185.514667 0 338.965333 137.269333 364.32 315.776A255.850667 255.850667 0 0 1 938.666667 650.666667c0 42.709333-10.496 83.978667-30.261334 120.842666-1.792 3.338667-4.992 8.928-9.696 16.96l14.613334 53.557334c6.506667 23.893333-15.402667 45.813333-39.296 39.296l-53.642667-14.634667-6.229333 3.669333A254.933333 254.933333 0 0 1 682.666667 906.666667a255.061333 255.061333 0 0 1-163.701334-59.168z m79.861334-24.042667A191.36 191.36 0 0 0 682.666667 842.666667a190.933333 190.933333 0 0 0 98.570666-27.2c2.208-1.322667 8.288-4.874667 18.517334-10.837334a32 32 0 0 1 24.522666-3.210666l12.565334 3.424-3.424-12.565334a32 32 0 0 1 3.338666-24.725333 996.672 996.672 0 0 0 15.242667-26.293333A190.997333 190.997333 0 0 0 874.666667 650.666667a191.68 191.68 0 0 0-54.634667-134.186667C808.458667 654.570667 720.650667 770.965333 598.826667 823.466667z m-387.050667-129.92l-12.512 45.866667 45.866667-12.512a32 32 0 0 1 24.522666 3.221333c15.253333 8.885333 24.373333 14.218667 27.594667 16.149333A302.4 302.4 0 0 0 453.333333 789.333333C621.226667 789.333333 757.333333 653.226667 757.333333 485.333333S621.226667 181.333333 453.333333 181.333333 149.333333 317.44 149.333333 485.333333c0 50.794667 12.448 99.712 35.904 143.456 3.104 5.792 10.933333 19.306667 23.2 40.021334a32 32 0 0 1 3.338667 24.725333zM586.666667 373.333333a32 32 0 0 1 0 64H320a32 32 0 0 1 0-64h266.666667zM458.666667 533.333333a32 32 0 0 1 0 64H320a32 32 0 0 1 0-64h138.666667z"
              ></path>
            </svg>
            <span>开启互动</span>
          </button>
        </div>
      </div>
      <!-- 评论区 -->
      <div
        id="page-comment-section"
        class="mt-16 hidden rounded-2xl border border-gray-200/70 bg-white/70 px-4 py-8 md:p-8 dark:border-white/10 dark:bg-white/5"
        th:if="${haloCommentEnabled}"
      >
        <halo:comment group="content.halo.run" kind="Post" th:attr="name=${post.metadata.name}" />
      </div>
    </article>
  </th:block>
</html>
